"use strict";(self.webpackChunkcoc_ibo=self.webpackChunkcoc_ibo||[]).push([[897],{897:(U,C,i)=>{i.r(C),i.d(C,{FeatureGameModule:()=>J});var r=i(6814),s=i(8451),p=i(887),u=i(3435),n=i(4946);function h(t,c){if(1&t&&(n.TgZ(0,"li")(1,"a",7),n._uU(2),n.qZA()()),2&t){const o=c.$implicit;n.xp6(1),n.Q6J("routerLink",o.name),n.xp6(1),n.hij(" ",o.display," ")}}let M=(()=>{var t;class c{constructor(e,a){this.router=e,this.gameManager=a,this.civs=p.LL}startWithRandom(){const e=Math.floor(Math.random()*p.LL.length);this.gameManager.createGame(p.LL[e].name).then(a=>this.router.navigate(["game","in-progress",a.toString()]))}}return(t=c).\u0275fac=function(e){return new(e||t)(n.Y36(s.F0),n.Y36(u.mj))},t.\u0275cmp=n.Xpm({type:t,selectors:[["coc-create-game"]],decls:10,vars:1,consts:[[1,"action"],[1,"primary",3,"click"],[1,"selection-title"],[1,"civ-container"],[1,"unstyled"],[4,"ngFor","ngForOf"],[1,"selection"],["routerLinkActive","active",1,"btn","primary",3,"routerLink"]],template:function(e,a){1&e&&(n.TgZ(0,"div",0)(1,"button",1),n.NdJ("click",function(){return a.startWithRandom()}),n._uU(2," Use Random Civilization "),n.qZA()(),n.TgZ(3,"p",2),n._uU(4," Please select a civilization:\n"),n.qZA(),n.TgZ(5,"div",3)(6,"ul",4),n.YNc(7,h,3,2,"li",5),n.qZA(),n.TgZ(8,"div",6),n._UZ(9,"router-outlet"),n.qZA()()),2&e&&(n.xp6(7),n.Q6J("ngForOf",a.civs))},dependencies:[r.sg,s.lC,s.rH,s.Od],styles:['@import"https://fonts.googleapis.com/css2?family=Poller+One&family=Lora&family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap";html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{min-height:100vh;color:#f2f2f2}body[_ngcontent-%COMP%]{background:linear-gradient(0deg,rgba(0,0,0,.2) 0%,rgba(0,0,0,.2) 100%),linear-gradient(12deg,#260909 0%,transparent 42%),linear-gradient(135deg,#260909 0%,#370c0d 46%,#3f0e0f 58%,#581415 100%)}.bg-dark[_ngcontent-%COMP%]{background-color:#001e20;color:#f2f2f2}.bg-light[_ngcontent-%COMP%]{background-color:#f2f2f2;color:#001e20}.material-symbols-outlined[_ngcontent-%COMP%]{font-variation-settings:"FILL" 0,"wght" 400,"GRAD" 0,"opsz" 24}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.02em;line-height:1.2em;font-family:Lora,Calibri,Times New Roman,serif}a[_ngcontent-%COMP%], button[routerLink][_ngcontent-%COMP%]{color:#026fa7;transition:all .2s}a[_ngcontent-%COMP%]:hover, button[routerLink][_ngcontent-%COMP%]:hover{color:#f2dd4c}a[_ngcontent-%COMP%]:active, button[routerLink][_ngcontent-%COMP%]:active{text-decoration:underline}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-family:Poller One,sans-serif;letter-spacing:.04em;text-transform:uppercase}h1[_ngcontent-%COMP%]{font-size:1.25em;margin-bottom:.2em}h2[_ngcontent-%COMP%]{font-size:1em;margin:0}ul.unstyled[_ngcontent-%COMP%]{list-style-type:none}.action[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:2em}.selection-title[_ngcontent-%COMP%]{display:block;width:100%;padding:1em 2em;background-color:#581415;text-align:center;font-size:1.5em;font-family:Poller One,sans-serif;text-transform:uppercase;letter-spacing:.04em;border-bottom:3px solid #61522c;border-radius:.5em .5em 0 0}.civ-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;grid-template-rows:auto 1fr;column-gap:2em;row-gap:2em}.civ-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%}.civ-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#61522c;color:#f2dd4c}']}),c})();var d=i(7398),P=i(8180),O=i(5619),b=i(8407);function y(t,c){1&t&&(n.TgZ(0,"span",10),n._uU(1," award_star "),n.qZA())}function x(t,c){if(1&t){const o=n.EpF();n.TgZ(0,"button",8),n.NdJ("click",function(){n.CHM(o);const a=n.oxw().$implicit,l=n.oxw();return n.KtG(l.onToggle(a.name))}),n.YNc(1,y,2,0,"span",9),n.qZA()}if(2&t){const o=n.oxw().$implicit;n.xp6(1),n.Q6J("ngIf",o.active)}}const _=function(t){return{active:t}};function G(t,c){if(1&t&&(n.ynx(0),n.TgZ(1,"dt",1),n.YNc(2,x,2,1,"button",3),n.TgZ(3,"header")(4,"span",4),n._uU(5),n.qZA(),n.TgZ(6,"span",5),n._uU(7),n.TgZ(8,"span",6),n._uU(9),n.ALo(10,"number"),n.qZA()()()(),n.TgZ(11,"dd",1)(12,"span",7),n._uU(13),n.qZA()(),n.BQk()),2&t){const o=c.$implicit,e=n.oxw();n.xp6(1),n.Q6J("ngClass",n.VKq(9,_,o.active)),n.xp6(1),n.Q6J("ngIf",e.inGame),n.xp6(3),n.hij(" ",o.name," "),n.xp6(2),n.hij("",o.category," "),n.xp6(2),n.hij("Required Technologies: ",n.lcZ(10,7,o.requiredAdvancements),""),n.xp6(2),n.Q6J("ngClass",n.VKq(11,_,o.active)),n.xp6(2),n.hij(" ",o.description," ")}}const T=function(t){return{"in-game":t}};let v=(()=>{var t;class c{constructor(){this.inGame=!1,this.toggle=new n.vpe}onToggle(e){this.toggle.emit(e)}}return(t=c).\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["coc-civ-panel"]],inputs:{civ:"civ",inGame:"inGame",advancements:"advancements"},outputs:{toggle:"toggle"},decls:6,vars:6,consts:[[1,"action"],[3,"ngClass"],[4,"ngFor","ngForOf"],["class","badge",3,"click",4,"ngIf"],[1,"name"],[1,"subhead"],[1,"required"],[1,"description"],[1,"badge",3,"click"],["class","material-symbols-outlined",4,"ngIf"],[1,"material-symbols-outlined"]],template:function(e,a){1&e&&(n.TgZ(0,"h3"),n._uU(1),n.TgZ(2,"span",0),n._uU(3),n.qZA()(),n.TgZ(4,"dl",1),n.YNc(5,G,14,13,"ng-container",2),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",a.civ.display," "),n.xp6(2),n.hij(" ",a.civ.board.action," "),n.xp6(1),n.Q6J("ngClass",n.VKq(4,T,a.inGame)),n.xp6(1),n.Q6J("ngForOf",a.advancements))},dependencies:[r.mk,r.sg,r.O5,r.JJ],styles:['@import"https://fonts.googleapis.com/css2?family=Poller+One&family=Lora&family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap";html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{min-height:100vh;color:#f2f2f2}body[_ngcontent-%COMP%]{background:linear-gradient(0deg,rgba(0,0,0,.2) 0%,rgba(0,0,0,.2) 100%),linear-gradient(12deg,#260909 0%,transparent 42%),linear-gradient(135deg,#260909 0%,#370c0d 46%,#3f0e0f 58%,#581415 100%)}.bg-dark[_ngcontent-%COMP%]{background-color:#001e20;color:#f2f2f2}.bg-light[_ngcontent-%COMP%]{background-color:#f2f2f2;color:#001e20}.material-symbols-outlined[_ngcontent-%COMP%]{font-variation-settings:"FILL" 0,"wght" 400,"GRAD" 0,"opsz" 24}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.02em;line-height:1.2em;font-family:Lora,Calibri,Times New Roman,serif}a[_ngcontent-%COMP%], button[routerLink][_ngcontent-%COMP%]{color:#026fa7;transition:all .2s}a[_ngcontent-%COMP%]:hover, button[routerLink][_ngcontent-%COMP%]:hover{color:#f2dd4c}a[_ngcontent-%COMP%]:active, button[routerLink][_ngcontent-%COMP%]:active{text-decoration:underline}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-family:Poller One,sans-serif;letter-spacing:.04em;text-transform:uppercase}h1[_ngcontent-%COMP%]{font-size:1.25em;margin-bottom:.2em}h2[_ngcontent-%COMP%]{font-size:1em;margin:0}ul.unstyled[_ngcontent-%COMP%]{list-style-type:none}h3[_ngcontent-%COMP%]{margin:0 0 2rem;font-family:Poller One,sans-serif;letter-spacing:.04em;text-transform:uppercase;background:#61522c;padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center}h3[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{font-size:1.5rem}dl[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:5rem;font-family:Poller One,sans-serif;text-transform:uppercase;letter-spacing:.04em}dl[_ngcontent-%COMP%]   dt.active[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{color:#00713b;font-size:2em}dl[_ngcontent-%COMP%]   dt.active[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#00713b}dl[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]   button.badge[_ngcontent-%COMP%]{padding:.25em;background-color:#f2f2f233;height:auto;display:flex;border-radius:unset;justify-content:center;align-items:center}dl[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]   button.badge[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:3rem}dl[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{flex:1 1 auto;padding:1em;display:flex;justify-content:space-between;align-items:center;background-color:#001e2066}dl[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:2em;color:#026fa7}dl[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .subhead[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end;text-align:right;color:#f2dd4c;font-size:1.25em}dl[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .subhead[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{margin-top:4px;font-size:.8125rem;color:#f2f2f2}dl.in-game[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{grid-template-columns:5rem 1fr}dl[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{margin:0 0 2em;padding:1em;background-color:#f2f2f21a;font-size:1.125em;line-height:1.4em}dl[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}']}),c})();const Z=function(){return[]};function k(t,c){if(1&t){const o=n.EpF();n.ynx(0),n.TgZ(1,"coc-civ-panel",1),n.NdJ("toggle",function(a){n.CHM(o);const l=n.oxw();return n.KtG(l.toggle(a))}),n.ALo(2,"async"),n.qZA(),n.TgZ(3,"div",2)(4,"button",3),n.NdJ("click",function(){n.CHM(o);const a=n.oxw();return n.KtG(a.endGame())}),n._uU(5,"End Game"),n.qZA(),n.TgZ(6,"button",4),n.NdJ("click",function(){n.CHM(o);const a=n.oxw();return n.KtG(a.saveGame())}),n._uU(7," Save Game "),n.qZA()(),n.BQk()}if(2&t){const o=n.oxw();n.xp6(1),n.Q6J("civ",o.civ)("advancements",n.lcZ(2,3,o.advancements$)||n.DdM(5,Z))("inGame",!0)}}let A=(()=>{var t;class c{constructor(e,a,l){this.gameManager=e,this.route=a,this.router=l,this.advancements=new O.X([]),this.advancements$=this.advancements.asObservable().pipe(),this.saveSuccess=!1;const g=this.route.paramMap.pipe((0,d.U)(m=>m.get("id")),(0,d.U)(m=>this.gameManager.loadGame(m||"")),(0,b.z)((0,P.q)(1)));this.loaded$=g.pipe((0,d.U)(({civ:m,game:f})=>!!f&&!!m)),g.subscribe(({civ:m,game:f})=>{this.civ=m,this.game=f,this.updateAdvancements()})}toggle(e){this.game.toggleAdvancement(e),this.saveGame(),this.updateAdvancements()}saveGame(){this.gameManager.saveGame(this.game),this.saveSuccess=!0,setTimeout(()=>this.saveSuccess=!1,6e3)}endGame(){this.gameManager.deleteGame(this.game.id),this.router.navigate(["/"])}updateAdvancements(){this.advancements.next(this.civ.board.advancements.map(e=>({...e,active:this.game.advancements.includes(e.name)})))}}return(t=c).\u0275fac=function(e){return new(e||t)(n.Y36(u.mj),n.Y36(s.gz),n.Y36(s.F0))},t.\u0275cmp=n.Xpm({type:t,selectors:[["coc-in-progress"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"civ","advancements","inGame","toggle"],[1,"game-actions"],[3,"click"],[1,"primary",3,"click"]],template:function(e,a){1&e&&(n.YNc(0,k,8,6,"ng-container",0),n.ALo(1,"async")),2&e&&n.Q6J("ngIf",!0===n.lcZ(1,1,a.loaded$))},dependencies:[r.O5,v,r.Ov],styles:[".game-actions[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between}"]}),c})();var L=i(2181),z=i(4664),F=i(4036);function w(t,c){if(1&t){const o=n.EpF();n.ynx(0),n.TgZ(1,"div",1)(2,"button",2),n.NdJ("click",function(){n.CHM(o);const a=n.oxw();return n.KtG(a.createGame())}),n._uU(3," Start Game "),n.qZA()(),n._UZ(4,"coc-civ-panel",3),n.BQk()}if(2&t){const o=c.ngIf;n.xp6(4),n.Q6J("civ",o)("advancements",o.board.advancements)}}const I=[{path:"create",component:M,children:[{path:":civ",component:(()=>{var t;class c{constructor(e,a,l){this.route=e,this.router=a,this.gameManager=l,this.civ$=this.route.paramMap.pipe((0,d.U)(g=>g.get("civ")),(0,d.U)(g=>g?p.WJ[g]:null))}createGame(){(0,F.z)(this.civ$.pipe((0,L.h)(Boolean),(0,d.U)(e=>e?.name),(0,z.w)(e=>this.gameManager.createGame(e)))).then(e=>this.router.navigate(["game","in-progress",e.toString()]))}}return(t=c).\u0275fac=function(e){return new(e||t)(n.Y36(s.gz),n.Y36(s.F0),n.Y36(u.mj))},t.\u0275cmp=n.Xpm({type:t,selectors:[["coc-civ-detail"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"start"],[1,"primary","large",3,"click"],[3,"civ","advancements"]],template:function(e,a){1&e&&(n.YNc(0,w,5,2,"ng-container",0),n.ALo(1,"async")),2&e&&n.Q6J("ngIf",n.lcZ(1,1,a.civ$))},dependencies:[r.O5,v,r.Ov],styles:[".start[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:2em}"]}),c})()}]},{path:"in-progress/:id",component:A}];let J=(()=>{var t;class c{}return(t=c).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[r.ez,s.Bz.forChild(I)]}),c})()}}]);